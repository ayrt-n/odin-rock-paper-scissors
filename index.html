<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Odin: Rock Paper Scissors!</title>
    </head>
    <body>
        <script>
                    
            function computerPlay() {
                const choiceArray = ["rock", "paper", "scissors"];
                const randomNum = Math.floor(Math.random() * 3);

                return choiceArray[randomNum];
            }

            function declareWinner(playerSelection, computerSelection) {
                if (playerSelection === "rock") {
                    if (computerSelection === "rock") {
                        return 0; // Zero indicates a draw
                    } else if (computerSelection === "paper") {
                        return -1; // Negative one indicates a loss
                    } else {
                        return 1; // One indicates a win
                    }
                } else if (playerSelection === "paper") {
                    if (computerSelection === "rock") {
                        return 1;
                    } else if (computerSelection === "paper") {
                        return 0;
                    } else {
                        return -1;
                    }
                } else {
                    if (computerSelection === "rock") {
                        return -1;
                    } else if (computerSelection === "paper") {
                        return 1;
                    } else {
                        return 0;
                    }
                }
            }

            function playerSelection() {
                let playerChoice = prompt("Choose rock, paper, or scissors?", "");

                if (playerChoice.toLowerCase() !== "rock" && 
                playerChoice.toLowerCase() !== "paper" &&
                playerChoice.toLowerCase() !== "scissors") {
                    alert("Must choose rock, paper or scissors");
                    return playerSelection();
                } else {
                    return playerChoice;
                } 
            }

            function game() {
                let counter = 0;
                let wins = 0;

                while (counter < 5) {
                    const playerChoice = playerSelection();
                    const computerChoice = computerPlay();

                    let results = declareWinner(playerChoice, computerChoice);
                    wins = wins + results;

                    if (results === 1) {
                        console.log("You win! " + playerChoice + " beats " + computerChoice);
                    } else if (results === -1) {
                        console.log("You lose! " + computerChoice + " beats " + playerChoice);
                    } else {
                        console.log("Draw! " + computerChoice + " does not beat " + playerChoice);
                    }

                    counter++;
                }

                if (wins > 0) {
                    console.log("You win!");
                } else if (wins < 0) {
                    console.log("You lose!");
                } else {
                    console.log("Draw!");
                }
            }

            game();

        </script>
    </body>
</html>